plugins {
  id 'org.jetbrains.intellij' version '0.7.3'
  id 'org.jetbrains.kotlin.jvm' version "1.5.0"
  id "org.jlleitschuh.gradle.ktlint" version "10.0.0"
}

group 'io.unthrottled'
version '1.4.1'

repositories {
  mavenCentral()
}

dependencies {
  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
  implementation "io.sentry:sentry:4.3.0"
  implementation "commons-io:commons-io:2.6"
  implementation "org.javassist:javassist:3.27.0-GA"
}

configurations {
  // sentry brings in a slf4j that breaks things
  implementation.exclude group: 'org.slf4j'
}

intellij {
  version 'LATEST-EAP-SNAPSHOT'
  type 'IU'
}
compileKotlin {
  kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
  kotlinOptions.jvmTarget = "1.8"
}
patchPluginXml {
  changeNotes file("$projectDir/changelog/CHANGELOG.html").text
  sinceBuild sinceBuildVersion
  untilBuild untilBuildVersion
}
