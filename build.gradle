plugins {
  id 'org.jetbrains.intellij' version '1.0'
  id 'org.jetbrains.kotlin.jvm' version "1.5.10"
  id "org.jlleitschuh.gradle.ktlint" version "10.1.0"
}

group 'io.unthrottled'
version '1.4.1'

repositories {
  mavenCentral()
}

dependencies {
  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
  implementation "io.sentry:sentry:4.3.0"
  implementation "commons-io:commons-io:2.9.0"
  implementation "org.javassist:javassist:3.28.0-GA"
}

configurations {
  // sentry brings in a slf4j that breaks things
  implementation.exclude group: 'org.slf4j'
}

intellij {
  version.set('LATEST-EAP-SNAPSHOT')
  type.set('IC')
}
compileKotlin {
  kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
  kotlinOptions.jvmTarget = "1.8"
}
tasks.patchPluginXml {
  changeNotes.set(file("$projectDir/changelog/CHANGELOG.html").text)
  sinceBuild.set(sinceBuildVersion)
  untilBuild.set(untilBuildVersion)
}
